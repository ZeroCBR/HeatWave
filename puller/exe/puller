#!/usr/bin/env ruby

require 'puller'

HOSTNAME = 'ftp2.bom.gov.au'
FILENAME = '/anon/gen/fwo/IDA00003.dat'
USER = 'ftp'
PASSWD = ''

source = { hostname: 'ftp2.bom.gov.au',
           filename: '/anon/gen/fwo/IDA00003.dat',
           user: 'ftp',
           passwd: '' }

pipeline = { getter: Puller::Getter,
             processor: Puller::Processor,
             marshaller: Marshal }

out_filename = ARGV.shift

out_file = File.open(out_filename, mode: 'w')

Puller.pull_from(source, pipeline, out_file)
